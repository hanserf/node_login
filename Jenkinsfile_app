pipeline {
    environment {
        registry = "hanserf/node-webdev"
        registryCredential = 'DOCKERHUB_HANSERF'
    }
    agent{ 
        node{
            label 'nuxbuilder'
        }
    }
    stages {
        stage('Cloning Git') {
            steps {
                checkout scm
            }
        }
        stage('Building image') {
            steps{
                script {
                    def img = docker.build(registry)
                    img.inside()
                    echo 'Fetching Image from registry'
                    sh '''
                    npm config ls
                    echo $PATH
                    pwd
                    tree .            
                    '''
                }
            }
        }
    }
}