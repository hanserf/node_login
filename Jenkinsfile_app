environment {
    registryCredential = 'MY_DOCKER_TOKEN'
}
node('nuxbuilder') {
    def app
    def repo
    stage('Cloning'){
        checkout scm    
    }
    repo = scm
    stage('Fetch image') {            
        echo 'Fetching Image from registry'
        def image
        docker.pull('hanserf/node-webdev:latest')
        image = docker.build('hanserf/node-webdev:latest')
    }
    stage('Build code'){
        image.inside {
            echo 'Fetching Image from registry'
            sh '''
            npm config ls
            echo $PATH
            pwd
            tree .            
            '''
        }
    }        
}